<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADB Interpreter</title>
    <script>
        function output(text){
            console.log(text);
            let t = document.createElement("div");
            t.innerText=text;
            document.getElementById("output").appendChild(t);
        }

        function run(){
        let lines = document.getElementById("code").value.split('\n');
        var labels = new Map();
        for(let i in lines){
            let parts = lines[i].split(' ');
            let firstWord = parts[0];
            if(firstWord.endsWith(':')){
                labels[firstWord.slice(0,-1)] = i;
                lines[i] = parts.slice(1).join(" ");
            }
        }
        var vars = new Map();
        let index=0;
        while(index < lines.length){
            let parts = lines[index].split(' ');
            let command = parts[0];
            console.log(command);
            switch (command) {
                case "got":
                    index=labels[parts[1]];
                    if (index==null) alert()
                    continue;
                case "var":
                    vars[parts[1]]=parseInt(parts[2]);
                    break;
                case "and":
                    vars[parts[1]] &= vars[parts[2]];
                    break;
                case "not":
                    vars[parts[1]] = vars[parts[1]] == 0?1: 0;
                    break;
                case "xor":
                    vars[parts[1]] ^= vars[parts[2]];
                    break;
                case "com":
                    break;    
                case "out":
                    output(vars[parts[1]]);
                    break;
            }
            index+=1;
        }
    }
    </script>
</head>
<body>
    <textarea id="code" placeholder="Put the text:" cols="40" rows="20">
var c 1
var d 1
and c d
out c
xor d c
out d

    </textarea>
    <br/><button onclick="run()">Run Adb:</button>
    <h2>Output:</h2>
    <div id="output"></div>
</body>
</html>