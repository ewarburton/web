<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8" />
<title>Grid</title>
 <meta name="viewport" content="initial-scale=1" />
   <meta name="apple-mobile-web-app-capable" content="yes" />
   <style>
	button { width: 10pt; height: 10pt; border: none; padding: 0; margin: 0}
	.myColours button { width: 40pt; height: 40pt }
	body { background: #ded }
	div.block { display: inline-block }
	div { margin: 0; padding: 0 }
	div.myColours { margin: 0.5em 0 3em 0 }
</style>
   <script>
	
var colour = "red";

function changeColor(col) { colour = col;}

const width=40;
const height=40;
const cellWidth = 17;
const cellHeight = 15;
const borderWidth = 2;
const svgNS = "http://www.w3.org/2000/svg";

let down = false;

function move(e) {
   var rect = grid.getBoundingClientRect();
   var x = e.pageX - rect.left;
   var y = e.pageY - rect.top;
   
   var index = Math.round(y / cellHeight)* width + Math.round(x/cellWidth);
   if(index < 0 || index > width * height) return;
   grid.children[index].setAttribute("fill",colour);
   
}

window.onload = function() {
	let grid = document.getElementById("grid");
	grid.setAttribute("width",width*cellWidth);
	grid.setAttribute("height",height*cellHeight);
	
      for(let y=0;y<height;y++) {
	 for(let x=0;x<width;x++) {
         let block = document.createElementNS(svgNS,'rect');
         block.setAttribute("x",cellWidth * x);
         block.setAttribute("y",cellHeight * y);
         block.setAttribute("width",cellWidth);
         block.setAttribute("height",cellHeight);
         block.setAttribute("fill","white");
         block.onclick = function() { block.setAttribute("fill",colour); };
         block.setAttribute("stroke","black");
         block.setAttribute("strokeWidth",borderWidth);
         grid.appendChild(block);
	 }
      }
      
      grid.onmousedown = grid.touchstart = function(e) { grid.onmousemove = grid.touchmove = move; move(e); };
      grid.onmouseup = grid.touchend = function() { grid.onmousemove = grid.touchmove = null; };
      
}
</script>
   
</head>

<body>
   <h1>Grid</h1>
   
   <div class="myColours">
      <button style="background: red" onclick="changeColor('red')">&nbsp;</button>
      <button style="background: orange" onclick="changeColor('orange')">&nbsp;</button>
      <button style="background: yellow" onclick="changeColor('yellow')">&nbsp;</button> 
      <button style="background: lime" onclick="changeColor('lime')">&nbsp;</button> 
      <button style="background: #0fc"  onclick="changeColor('#0fc')">&nbsp;</button>
      <button style="background: aqua"  onclick="changeColor('aqua')">&nbsp;</button>
      <button style="background: #08f" onclick="changeColor('#08f')">&nbsp;</button>
      <button style="background: #00f" onclick="changeColor('#00f')">&nbsp;</button>
      <button style="background: #a0f" onclick="changeColor('#a0f')">&nbsp;</button> 
      <button style="background: #f0f" onclick="changeColor('#f0f')">&nbsp;</button>
      <button style="background: #f09" onclick="changeColor('#f09')">&nbsp;</button>

      <button style="background: white" onclick="changeColor('white')">&nbsp;</button>
      <button style="background: gray" onclick="changeColor('gray')">&nbsp;</button>
      <button style="background: black" onclick="changeColor('black')">&nbsp;</button>
      <button style="background: #ffcc00" onclick="changeColor('#ffcc00')">&nbsp;</button>
      <button style="background: #ffcc88" onclick="changeColor('#ffcc88')">&nbsp;</button>
   </div>
   
<svg xmlns="http://www.w3.org/2000/svg" id="grid" ></svg>

</body>

</html>
